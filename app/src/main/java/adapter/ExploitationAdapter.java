package adapter;

import android.content.Context;
import android.content.Intent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import android.widget.Toast;

import java.util.ArrayList;
import java.util.List;

import androidx.annotation.NonNull;
import androidx.recyclerview.widget.RecyclerView;
import bj.app.wapi.R;
import bj.app.wapi.ui.ChampsDetailsActivity;
import bj.app.wapi.ui.DetailsExploitation;
import entityBackend.Champs;
import entityBackend.Farmer;

public class ExploitationAdapter extends RecyclerView.Adapter <ExploitationAdapter.ExploitationViewHolder>{

    private Context mContext;
    private List<Champs> mData;
    View view;
    public ExploitationAdapter(Context mContext, List<Champs> mData) {
        this.mContext = mContext;
        this.mData = mData;
    }

    @NonNull
    @Override
    public ExploitationAdapter.ExploitationViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        view = LayoutInflater.from(mContext).inflate(R.layout.item_champs, parent, false);
        return new ExploitationAdapter.ExploitationViewHolder(view);
    }

    @Override
    public void onBindViewHolder(@NonNull ExploitationAdapter.ExploitationViewHolder holder, int position) {
        holder.tv_name_champs.setText(mData.get(position).getName());
        holder.tv_etape_culture.setText("Pousse");
        holder.tv_date_semie.setText(mData.get(position).getSaisonCultures().get(mData.get(position).getSaisonCultures().size()-1).getDateSemie());
        holder.tv_current_culture.setText(mData.get(position).getSaisonCultures().get(mData.get(position).getSaisonCultures().size()-1).getNomCulture());
        holder.tv_superfice_champs.setText("400 mÂ²");
        holder.itemView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                mContext.startActivity(new Intent(mContext, DetailsExploitation.class)
                    .putExtra("champs", mData.get(position)));
                //Toast.makeText(mContext, "You just click on "+mData.get(position).getEmployees().size(), Toast.LENGTH_LONG).show();
            }
        });
    }

    @Override
    public int getItemCount() {
        return mData.size();
    }

    class ExploitationViewHolder  extends RecyclerView.ViewHolder{
        TextView tv_name_champs, tv_etape_culture, tv_superfice_champs, tv_current_culture, tv_date_semie;

        public ExploitationViewHolder(@NonNull View itemView) {
            super(itemView);
            tv_name_champs = itemView.findViewById(R.id.tv_champs_name);
            tv_etape_culture = itemView.findViewById(R.id.tv_etape_culture_value);
            tv_current_culture = itemView.findViewById(R.id.tv_current_culture_value);
            tv_superfice_champs = itemView.findViewById(R.id.tv_superficie_value);
            tv_date_semie = itemView.findViewById(R.id.tv_date_semie_value);
        }
    }
}